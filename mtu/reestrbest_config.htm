<html>

<head>
<title>Наилучшее использование файлов CONFIG.SYS и
AUTOEXEC.BAT</title>
</head>

<body aLink="#FF0000" bgColor="#FFFFFF" link="#0000FF" text="#000000" vLink="#0000FF">

<p ALIGN="CENTER"><big><big><font color="#0000FF">Наилучшее
использование файлов<br>
CONFIG.SYS и AUTOEXEC.BAT</font></big></big></p>

<p align="center"><img src="../../images/line_blue.gif" width="90%" height="2"></p>

<p align="center">&nbsp;&nbsp;&nbsp; <big>Наилучшее использование
файла CONFIG.SYS</big></p>

<p>&nbsp;&nbsp;&nbsp; При включении компьютера его
встроенные программы выполняют внутреннюю
диагностику и загружают часть DOS, которая затем
ищет в корневом каталоге загрузочного диска файл
с именем CONFIG.SYS. Если файл найден, то он
используется для настройки системы и загрузки
полной версии DOS, если же нет (возможно, из-за того,
что вы его случайно уничтожили =), компьютер
загружает DOS в конфигурации, заданной по
умолчанию, и не устанавливает никаких
дополнительных драйверов. То же самое
произойдёт, если вы дадите DOS указание
проигнорировать CONFIG.SYS (смотрите &quot;Режимы
начальной загрузки&quot;). </p>

<p>&nbsp;&nbsp;&nbsp; Прежде чем пытаться что-либо
усовершенствовать, необходимо принять меры
предосторожности - создать резервную
загрузочную дискету. Всякий раз, когда вы
изменяете файл конфигурации или запускаете
вносящую изменения программу инсталляции, вы
рискуете сделать невозможной загрузку с
жёсткого диска. Если это произойдёт, загрузочная
дискета поможет вам снова запустить систему. </p>

<p>&nbsp;&nbsp;&nbsp; Возьмите чистую дискету и
сформатируйте её командой FORMAT A: /S (т.е. с
копированием системных файлов DOS). Затем
проверьте, имеется ли на дискете файл COMMAND.COM, и
попробуйте с неё загрузиться. Убедившись, что
загрузка происходит нормально, пометьте дискету,
как &quot;Системная&quot;. Теперь можно начинать.</p>

<p>&nbsp;&nbsp;&nbsp; <big>Режимы начальной загрузки.</big></p>

<p>&nbsp;&nbsp;&nbsp; В MS-DOS 6.x введён ряд новых функций,
позволяющих избежать неудобств при настройке
файла CONFIG.SYS. Когда на экране появляется
сообщение &quot;Запускается MS-DOS…&quot; (Now starting MS-DOS…),
вы можете нажатием клавиши &lt;F5&gt; запретить
выполнение файла config.sys, после чего DOS загрузится
в стандартной конфигурации. Это пригодится вам,
если в config.sys окажется ошибка, не дающая системе
загрузиться. Хотя и существует загрузочная
дискета, таким способом можно решить многие
проблемы, связанные с загрузкой. Нажав &lt;F8&gt; вы
запустите config.sys (а в DOS 6.2 также autoexec.bat) в
пошаговом режиме, где сможете для каждой строки
выбирать, выполнить её или проигнорировать, а
пройдя интересующие вас строки, дать команду
выполнить или пропустить всё оставшееся. Если
вам захочется узнать, какая строка вызывает
ошибку, то загрузившись с &lt;F8&gt;, просто
подтверждайте выполнение всех строк подряд, пока
не возникнет ошибка. Команда REM и точка с запятой
удобны, когда нужно снабдить config.sys комментарием,
объясняющим, например, зачем добавлена такая-то
строка или изменён такой-то параметр:</p>

<pre><font color="#000080">REM Старая установка:
REM BUFFERS=10
REM XYZ-Calc требует больше:
BUFFERS=20</font></pre>

<p>&nbsp;&nbsp;&nbsp; Но чаще они служат для временного
отключения строки при отработке разных
вариантов файла. Гораздо проще набрать перед
началом строки &quot;REM&quot;, чем удалять её, а
впоследствии, если потребуется восстановить
прежний вариант, набирать заново.</p>

<p>&nbsp;&nbsp;&nbsp; И, наконец, в MS-DOS 6.х появилась
возможность создавать красочные меню
конфигураций и задавать установки по умолчанию
для случая, когда при загрузке никто не
присутствует, - они будут использованы, если по
прошествии определённого времени выбор не
произойдёт.</p>

<p>&nbsp;&nbsp;&nbsp; <big>Команды конфигурации.</big></p>

<p><strong>[COMMON]</strong> - определяет блок команд config.sys,
выполняемый во всех вариантах выбора.<br>
<strong>INCLUDE</strong> - позволяет включить один блок меню
в другой и избежать таким образом повторяющихся
блоков.<br>
<strong>MENUCOLOR</strong> - определяет цвет текста и фона
меню.<br>
<strong>MENUDEFAULT</strong> - указывает пункт меню,
используемый по умолчанию, и задаёт время
ожидания.<br>
<strong>MENUITEM</strong> - задаёт для пункта меню внутреннее
имя и текст, выводимый на экран.<br>
<strong>SUBMENU</strong> - позволяет создать подменю для
определённого пункта меню.</p>

<p>&nbsp;&nbsp;&nbsp; Когда вы выбираете пункт меню config.sys,
его имя передаётся в файл autoexec.bat через
переменную окружения, называемую CONFIG. Если,
например, в меню были два пункта - DOS и WINDOWS, файл
autoexec.bat можно начать с команды GOTO %CONFIG%, которая
вызовет переход на одну из двух меток - :DOS или
:WINDOWS. </p>

<p>&nbsp;&nbsp;&nbsp; Файл config.sys с многовариантной
настройкой имеет следующий вид:</p>

<pre>REM Пример файла CONFIG.SYS</pre>

<pre><font color="#000080">[MENU]
NUMLOCK=OFF
MENUCOLOR=1,15
MENUDEFAULT=DOS,60
MENUITEM=DOS,Конфигурация DOS
MENUITEM=WIN,Конфигурация Windows</font></pre>

<pre><font color="#000080">[DOS]
Здесь должны быть команды конфигурации DOS</font></pre>

<pre><font color="#000080">[WIN]
Здесь должны быть команды конфигурации Windows</font></pre>

<pre><font color="#000080">[COMMON]
Здесь должны быть команды, общие для DOS и Windows</font></pre>

<p>&nbsp;&nbsp;&nbsp; Соответствующий файл autoexec.bat должен
выглядеть таким образом:</p>

<pre><font color="#000080">REM Здесь должны быть команды, общие для DOS и Windows
GOTO %CONFIG%</font></pre>

<pre><font color="#000080">:DOS
REM Здесь должны быть команды настройки DOS
GOTO DONE</font></pre>

<pre><font color="#000080">:WIN
REM Здесь должны быть команды настройки Windows</font></pre>

<pre><font color="#000080">:DONE
REM Здесь должны быть заключительные, общие для DOS и Windows</font></pre>

<p>&nbsp;&nbsp;&nbsp; Выполнение файла config.sys, приведённого
выше, начинается с выключения клавиши &lt;Num Lock&gt; и
установки синего цвета букв на белом фоне экрана.
В качестве варианта по умолчанию выбирается DOS,
время ожидания устанавливается в 60 секунд. На
экране пункты меню выглядят как: 

<ol>
  <li>Конфигурация DOS</li>
  <li>Конфигурация Windows</li>
</ol>

<p>&nbsp;&nbsp;&nbsp; Внутренние имена их - DOS и WIN. Файл
состоит из четырёх секций. Можно создать и пятую
(точнее, нулевую), поместив какие-нибудь команды
выше строки [MENU] - они будут выполнены до того, как
меню появится на экране. </p>

<p>&nbsp;&nbsp;&nbsp; Лучше всего, продемонстрировать вам
имеющиеся файлы config.sys и autoexec.bat…</p>

<p>rem Пример файла CONFIG.SYS</p>

<p>[menu]<br>
NUMLOCK=ON<br>
menucolor=9,0<br>
menudefault=DOS,60<br>
menuitem=DOS,DOS...<br>
menuitem=WIN,Windows95...</p>

<p>[DOS]<br>
DEVICE=C:\WINDOWS\HIMEM.SYS /shadow:on<br>
DEVICE=C:\WINDOWS\EMM386.EXE<br>
DEVICEHIGH=C:\DN\ANSI.SYS<br>
DOS=HIGH,UMB,AUTO</p>

<p>REM Описание дисковода CD-ROM (нижняя строчка)<br>
DEVICEHIGH /L:1=\CPQDOS\CPQIDECD.SYS /D:IDECD001</p>

<p>FILESHIGH=80<br>
BUFFERSHIGH=40,4<br>
FCBSHIGH=10<br>
SWITCHES=/F</p>

<p>[WIN]<br>
device=C:\WINDOWS\HIMEM.SYS /shadow:on</p>

<p>[COMMON]<br>
device=c:\windows\COMMAND\display.sys con=(ega,,1)<br>
Country=007,866,c:\windows\COMMAND\country.sys<br>
device=c:\windows\cs4232c.exe /A</p>

<p ALIGN="CENTER">&nbsp;</p>

<p>rem Пример файла AUTOEXEC.BAT</p>

<p>@SET DN=C:\DN\<br>
@PATH c:\windows;c:\windows\COMMAND;C:\DN<br>
@SET TEMP=C:\DN<br>
@ECHO OFF<br>
SET BLASTER=A220 I5 D1 T4<br>
GOTO %config%</p>

<p>:DOS<br>
rem Описание дисковода CD-ROM(нижние две строчки)<br>
SET FIXP=E:<br>
LH \CPQDOS\MSCDEX.EXE /D:IDECD001 /L:E<br>
LH C:\WINDOWS\COMMAND\DOSKEY</p>

<p>C:\MOUSE\MOUSE.COM /L=GB<br>
LH MKEY.COM<br>
C:\DN\DN.COM<br>
GOTO DONE</p>

<p>:WIN<br>
LH MKEY.COM<br>
GOTO DONE</p>

<p>:DONE<br>
PATH=C:\WINDOWS;C:\WINDOWS\COMMAND;%PATH%<br>
mode con codepage prepare=((866) c:\windows\COMMAND\ega3.cpi)<br>
mode con codepage select=866</p>

<p><a name="2">&nbsp;&nbsp; <big>Команды Config.sis</big></a></p>

<p>&nbsp;&nbsp;&nbsp; Данное описание относится к MS-DOS 6.x,
так что если у Вас более ранняя версия, следует
уточнить по предстовляемому справочнику, какие
команды Вам доступны !!!</p>

<p>&nbsp;&nbsp;&nbsp; Следующие команды можно
использовать только в Config.sys:</p>

<p>&nbsp;&nbsp;&nbsp; <strong>BUFFERS=m[,n]</strong> - устанавливает
количество доступных DOS первичных (m) и вторичных
(n) буферов. Когда Config.sys содержит команду DOS=HIGH,
буферы загружаются в HMA. Если Вы пользуетесь
программой кэширования диска (к примеру - SmartDrive),
задайте небольшое количество первичных буферов
и не пользуйтесь вторичными. Значение m,
устанавливаемое по умолчанию, зависит от объёма
памяти и ёмкости жёстких дисков компьютера (n по
умолчанию равно нулю).</p>

<p>&nbsp;&nbsp;&nbsp; <strong>COUNTRY=xxx[,yyy][,&lt;имя файла&gt;]</strong> -
предписывает DOS использовать набор символов, а
также форматы вывода времени, даты, принятые в
какой-либо стране. (ххх - это трёхзначный код
страны [совпадает с телефонным кодом], yyy - это
номер соответствующей кодовой страницы [набора
символов], &lt;имя файла&gt; - имя файла, содержащего
информацию о стране [по умолчанию Country.sys]).</p>

<p>&nbsp;&nbsp;&nbsp; <strong>DEVICE=&lt;имя файла&gt;</strong> -
загружает в обычную память драйвер устройства и
инициализирует его.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>DEVICEHIGH=[/L[/S]]&lt;имя файла&gt;</strong> -
загружает драйвер устройства в верхнюю память
(UMB) и инициализирует его. Если драйвер не
помещается в UMB, команда действует так же, как и
команда DEVICE=. Переключатели /L и /S помогают
оптимизировать память.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>DOS=[HIGH|LOW][UMB|NOUMB]</strong> - определяет,
необходимо ли DOS загрузить часть своего кода в HMA
(ДА - HIGH, НЕТ - LOW) и поддерживать свзь с верхней
памятью (ДА - UMB, НЕТ - NOUMB). </p>

<p>&nbsp;&nbsp;&nbsp; <strong>DRIVPARM</strong> - устанавливает
параметры дисковода либо другого аналогичного
устройства.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>FCBS=n</strong> - устанавливает число
блоков управления файлами, которые могут быть
открыты одновременно. Обычно n - от 1 до 255. По
умолчанию ставится - 4.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>FILES=n</strong> - устанавливат число
файлов, которые могут быть открыты одновременно.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>INSTALL=&lt;имя файла&gt;</strong> -
загружает резидентную программу при выполнении
Config.sys. Эти команды обрабатываются после того, как
выполнятся команды DEVICE, и до загрузки Command.com. </p>

<p>&nbsp;&nbsp;&nbsp; <strong>LASTDRIVE=X</strong> - устанавливает
максимальную разрешённую букву устройства.
Обычно, по умолчанию, логическим устройством с
максимальным номером является следующее за тем,
которое последним нашла или создала DOS при
загрузке компьютера. </p>

<p>&nbsp;&nbsp;&nbsp; <strong>NUMLOCK=[ON|OFF]</strong> - включает или
выключает клавишу &lt;Num Lock&gt;. Эта команда удобна в
том случае, когда требуется управлять курсором с
цифровой клавиатуры.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>SHELL=&lt;имя файла&gt;[параметры]</strong>
- определяет интерпретатор команд (обычно COMMAND.COM)
и путь к нему. С помощью параметров можно указать
стартовый файл, отличный от Autoexec.bat</p>

<p>&nbsp;&nbsp;&nbsp; Дальнейшие команды можно
использовать в CONFIG.SYS и AUTOEXEC.BAT и в командной
строке DOS:</p>

<p>&nbsp;&nbsp;&nbsp; <strong>BREAK=[ON|OFF]</strong> - при BREAK=ON проверка
нажатия &quot;&lt;Ctrl&gt; + C&quot; и &quot;&lt;Ctrl&gt; + &lt;Break&gt;&quot;
происходит чаще, чем обычно. По умолчанию
устанавливается BREAK=OFF. При использовании этой
команды в AUTOEXEC.BAT и в командной строке DOS знак
равенства необходимо опустить.</p>

<p>&nbsp;&nbsp;&nbsp; <strong>REM</strong> - указывает на то, что
строка является комментарием и не выполняется.
Слово REM с последующим пробелом, необходимо
ставить в начало строки.</p>

<p>&nbsp;</p>
<b>

<p ALIGN="CENTER"></b><a name="3"><big>Рационализация файла
Autoexec.bat</big></a><b></p>

<p></b><big>Предназначение файла Autoexec.bat</big></p>

<p>&nbsp;&nbsp;&nbsp; Давайте, прежде всего, разберёмся для
чего же служит файл Autoexec.bat. В первую очередь, он
позволяет загружать резидентные программы -
всевозможные утилиты. Во-вторых, можно создавать
и модифицировать вычислительную среду
компьютера: например, заменить стандартный
чёрно-белый экран DOS на цветной с помощью
включённых в файл команд PROMPT и ECHO, упростить
названия часто используемых подкаталогов,
сообщить DOS, где искать Ваши любимые программы, и
т.п. И в-третьих, Вы можете запустить из autoexec.bat
одну либо несколько программ. Тем, кому не
нравится работать с командной строкой,
настраивают этот файл так, что он вводит их
непосредственно в меню, оболочку с графическим
интерфейсом (по типу DOS или Windows) либо в другую
полюбившуюся прикладную программу…<u><b></p>

<p></b><big>Внимание:</u> Как редактировать Autoexec.bat</big></p>

<p>&nbsp;&nbsp;&nbsp; Работая с файлом autoexec.bat, очень просто
допустить ошибки. Но к счастью, ничего ужасного
не произойдёт, если Вы допустите какую-нибудь
промашку. Просто DOS выведет на экран
соответствующее сообщение. Правда… Иногда
ошибка приводит к тому, что Ваше любимое железо
не может загрузиться! :) В связи с этим, советую
Вам, прежде чем приступать к видоизменению файла,
сделайте себе резервную загрузочную дискету!!! <b></p>

<p></b><big>Какие бывают резидентные программы и
какие из них понадобятся</big></p>

<p>&nbsp;&nbsp;&nbsp; В системе DOS 6.x шестнадцать
резидентных программ. По крайней мере, так везде
пишут :) <br>
&nbsp;&nbsp;&nbsp; Одни из них полезны, другие совершенно
устарели, а некоторые даже - опасны! Но я, к
сожалению, знаком далеко не со всеми программами,
вот некоторые из них:</p>
<b>

<p>&nbsp;&nbsp;&nbsp; Doskey.com </b>- позволяет вызывать и
редактировать в командной строке предыдущую
команду DOS, а также создавать и использовать
мощные макрокоманды. Обе эти возможности
облегчают работу работу с командной строкой DOS,
однако следите, чтобы буфер doskey не был слишком
велик. Если Вы только редактируете команды, этот
буфер может быть совсем маленьким, в том случае,
когда макрокоманд много, следует буфер
расширить. <b></p>

<p>&nbsp;&nbsp;&nbsp; MSCDEX.EXE </b>- обеспечивают общую
поддержку дисков CD-ROM. Перед тем как использовать
эту программу, в файле config.sys следует установить
драйвер дисковода CD-ROM. </p>
<b>

<p>&nbsp;&nbsp;&nbsp; SMARTDRV (SMARTDrive) </b>- одна из немногих
программ кэширования диска, способная при
необходимости использовать память совместно с
Windows. Кроме того, при наличии программы DoubleSpace она
кэширует не сжатый диск, а главный, и в результате
эффективность этой операции возрастает вдвое. <b></p>

<p>&nbsp;&nbsp;&nbsp; UNDELETE.EXE </b>- это средство
восстановления ошибочно стёртых файлов. Нужна ли
она Вам, зависит сами понимаете от кого ;) Конечно
объём занимаемой ею памяти компенсируется
безопасностью, которую она даёт!</p>

<p>&nbsp;&nbsp;&nbsp; Если Вы пытаетесь усовершенствовать
autoexec.bat , то в первую очередь лучше всего
посмотреть, какие резидентные программы он
загружает. Одна из распространённых среди
пользователей ПК ошибок состоит в том, что они
загружают в файле autoexec.bat много резидентных
программ, в том числе и те, которые нужны не так уж
часто. Эти человеки :) не учитывают, что каждая
утилита отбирает часть обычной памяти системы и,
если резидентных программ будет много, обычной
памяти может не хватить таким прикладным
программам, как текстовый процессор или
электронная таблица!</p>

<p>Продолжение следует...</p>

<p>Гардемарин &lt;<a href="mailto:adventurer@mtu-net.ru">adventurer@mtu-net.ru</a>&gt;</p>

<p align="center"><img src="../../images/line_blue.gif" width="90%" height="2"></p>

<p align="center"><a href="../../index.htm"><img src="../../images/btn_home.gif" alt="Основная страничка" border="0" WIDTH="76" HEIGHT="38"></a><a href="../../helps.htm"><img src="../../images/btn_section.gif" alt="Маленькие хитрости" border="0" WIDTH="77" HEIGHT="38"></a></p>
</body>
</html>
